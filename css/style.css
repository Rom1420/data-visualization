/* ====== Dashboard GHPD (scopé) ====== */
.ghpd {}

/* --------- Layout --------- */
.ghpd .split{
  display:grid;
  grid-template-columns: 2fr 1fr; /* 2/3 – 1/3 */
  gap:12px;
  align-items:start;
}
.ghpd .col-left{
  display:grid;
  grid-template-rows:auto auto;
  gap:12px;
}

/* --------- Panneaux --------- */
.ghpd .panel,
.ghpd .detail{
  background: var(--card, #fff);
  border: 1px solid var(--border, #d1d5db);
  border-radius: 16px;
  padding: 12px;
  color: var(--text, #111827);
}
.ghpd .panel h2{ margin:0 0 6px; font-size:16px; }
.ghpd .detail h3{ margin:0 0 8px; font-size:15px; }

/* --------- Contrôles --------- */
.ghpd .controls{
  display:grid;
  grid-template-columns: repeat(3, minmax(180px, 1fr)) auto; /* 3 champs + bouton */
  gap:8px;
  align-items:end;
  margin-bottom:8px;
}
.ghpd .controls label{
  display:flex;
  flex-direction:column;
  gap:6px;
  font-size:12px;
  color: var(--muted, #374151);
}
.ghpd select,
.ghpd input[type="search"]{
  padding:8px 10px;
  border-radius:10px;
  background: var(--input, #fff);
  color: var(--text, #111827);
  border:1px solid var(--border, #d1d5db);
  outline:none;
}
.ghpd select:focus,
.ghpd input[type="search"]:focus{
  box-shadow:0 0 0 3px #2563eb22;
  border-color:#2563eb;
}
.ghpd .controls button{
  padding:8px 12px;
  border-radius:10px;
  background: var(--input, #f3f4f6);
  color: var(--text, #111827);
  border:1px solid var(--border, #d1d5db);
  cursor:pointer;
}
.ghpd .controls button:hover{ filter:brightness(.97); }

/* --------- Badges & légende --------- */
.ghpd .badge{
  padding:.1rem .5rem;
  border:1px solid #e5e7eb;
  border-radius:999px;
  font-size:11px;
  color: var(--muted, #374151);
  background:#f9fafb;
}
.ghpd .legend{ margin:2px 0 4px; }

/* --------- KPI --------- */
.ghpd .kpis{
  display:grid;
  grid-template-columns: repeat(auto-fit,minmax(140px,1fr));
  gap:8px;
  margin:8px 0;
}
.ghpd .kpi{
  background: var(--input, #fff);
  border:1px solid var(--border, #e5e7eb);
  border-radius:12px;
  padding:8px;
}
.ghpd .kpi .k{ font-size:11px; color: var(--muted, #6b7280); }
.ghpd .kpi .v{ font-weight:600; }

/* --------- Tableau --------- */
.ghpd .table{
  width:100%;
  border-collapse:collapse;
  font-size:12px;
  margin-top:6px;
}
.ghpd .table th,
.ghpd .table td{
  border-bottom:1px solid var(--border, #e5e7eb);
  padding:6px 8px;
  text-align:left;
}
.ghpd .table tr:nth-child(even){ background:#fafafa; }

/* --------- Tooltip D3 --------- */
.ghpd .tooltip{
  position:fixed;
  pointer-events:none;
  z-index:10;
  background:#ffffff;
  color:#111827;
  border:1px solid #e5e7eb;
  border-radius:10px;
  padding:8px 10px;
  font-size:12px;
  box-shadow:0 6px 24px rgba(0,0,0,.15);
  opacity:0;
  transform:translateY(-4px);
  transition:opacity .12s ease, transform .12s ease;
}

/* --------- Axes & grille D3 --------- */
.ghpd .axis text{ fill: var(--text, #111827); font-size:11px; }
.ghpd .axis line,
.ghpd .axis path{ stroke: var(--grid, #e5e7eb); }
.ghpd .grid line{ stroke:#f0f2f5; stroke-dasharray:2 3; }
.ghpd .bar--selected{ outline:2px solid #2563eb55; }

/* --------- SVG --------- */
.ghpd svg{ width:100%; display:block; }

/* --------- Mekko --------- */
.ghpd .mekko-label{ fill: var(--text, #111827); font-weight:500; }
.ghpd .mekko-col .mekko-tile{ cursor:pointer; transition:opacity .12s ease; }
.ghpd .mekko-col .mekko-tile:hover{ outline:2px solid #00000022; opacity:.96; }

/* --------- Responsive --------- */
@media (max-width: 980px){
  .ghpd .split{ grid-template-columns:1fr; }
  .ghpd .controls{ grid-template-columns: 1fr 1fr; }
}

/* Tuile active (mise en avant déjà gérée inline, mais classe dispo) */
.ghpd .mekko-tile.active rect {
  stroke: #111;
  stroke-width: 2.5px;
  filter: drop-shadow(0 1px 4px rgba(0,0,0,.35));
}

/* Modal */
.ghpd-modal-overlay{
  position:fixed; inset:0; background:rgba(15,23,42,.45);
  display:flex; align-items:center; justify-content:center; z-index:70;
}
.ghpd-modal{
  width:min(940px, 92vw); max-height:86vh; overflow:auto;
  background:var(--card,#fff); color:var(--text,#111);
  border:1px solid var(--border,#e5e7eb); border-radius:14px; padding:14px;
  box-shadow:0 20px 60px rgba(0,0,0,.35);
}
.ghpd-modal .modal-header{ display:flex; align-items:center; justify-content:space-between; gap:8px; }
.ghpd-modal .modal-header h3{ margin:0; font-size:18px; }
.ghpd-modal .modal-header{ border-left:5px solid var(--accent,#3b82f6); padding-left:10px; }
.ghpd-modal .modal-close{
  font-size:22px; line-height:22px; padding:2px 8px; border-radius:10px;
  border:1px solid var(--border,#e5e7eb); background:var(--input,#f8fafc); cursor:pointer;
}
.ghpd-modal .modal-close:hover{ filter:brightness(.97); }
.ghpd-modal .modal-kpis{
  display:grid; grid-template-columns: repeat(auto-fit,minmax(140px,1fr));
  gap:8px; margin:10px 0;
}
.ghpd-modal .modal-kpis .kpi{
  background:var(--input,#f8fafc); border:1px solid var(--border,#e5e7eb);
  border-radius:10px; padding:8px;
}
.ghpd-modal .modal-kpis .k{ font-size:11px; color:var(--muted,#6b7280) }
.ghpd-modal .modal-kpis .v{ font-weight:600 }
.ghpd-modal .modal-table{ margin-top:6px; }
body.modal-open{ overflow:hidden; }
